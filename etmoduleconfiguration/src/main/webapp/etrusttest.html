<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>
  <body>
    
      <div class="row"id="hola"></div>
      
<script>
var reviewMetadata;
    
 var etrust = {
    etHost : "http://localhost:8080/etmoduleconfiguration/",
    etUser : "prestashop",
    etPass : "prestashop",

    getPresaleMetadata : "/etapi/presale/getFunctionalities",
    productReviewServiceName: "/presale/productreview/create",

    getProductReviewMeta : getProductReviewMeta 
}
    
    function getProductReviewMeta(serviceName){
        
        var self = this;
        
        $.ajax({
            url: etrust.etHost + etrust.getPresaleMetadata,
            data: {"serviceName":etrust.productReviewServiceName},
            success: function(data){
                callBackMetaEtrust(data.response);
            },
            fail: function(data){
                console.log("Error in ETRUST" + data);
            }
        });
        
    
}
    
function callBackMetaEtrust(meta){
    reviewMetadata = meta;
}

function initEtrust() {
    var c = "getProductReviewMeta";
    etrust[c](etrust.productReviewServiceName);
};
    
    
function addEtrustSaveComponents(options){

    var ele = $("#"+options["element"]);
    ele.html("");
    
    if(!reviewMetadata || reviewMetadata[0].functionalities.length == 0) return;
    
    $.each(reviewMetadata[0].functionalities,function(i,item){
        var itemId = "et"+item.name.replace(/ /g,'');
        switch (item.htmlElement){
            case "inputtext":
                
                ele.append("<div class = 'form-group'>");
                ele.append(item.name+":<br>");
                ele.append('<input type="text" id='+itemId+'><br>');
                ele.append('</div>');
                
                break;
        }
    });
    
}

</script>
      
  </body>
</html>

